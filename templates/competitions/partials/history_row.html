<!-- Single row for HTMX swap after setting final selection -->
<tr class="{% if submission.is_final_selection %}bg-primary/10{% endif %}">
    <td>{{ submission.id }}</td>
    <td>{{ submission.submitted_at|date:"Y-m-d H:i" }}</td>
    <td>
        {% if submission.status == 'PENDING' %}
        <span class="badge badge-ghost">ç­‰å¾…ä¸­</span>
        {% elif submission.status == 'PROCESSING' %}
        <span class="badge badge-info">
            <span class="loading loading-spinner loading-xs mr-1"></span>
            è™•ç†ä¸­
        </span>
        {% elif submission.status == 'SUCCESS' %}
        <span class="badge badge-success">æˆåŠŸ</span>
        {% else %}
        <span class="badge badge-error tooltip" data-tip="{{ submission.error_message }}">
            å¤±æ•—
        </span>
        {% endif %}
    </td>
    <td>
        {% if submission.public_score is not None %}
        <span class="font-mono font-bold">{{ submission.public_score|floatformat:4 }}</span>
        {% else %}
        <span class="text-gray-400">-</span>
        {% endif %}
    </td>
    <td>
        {% if submission.is_final_selection %}
        <span class="badge badge-accent">âœ“ æœ€çµ‚ç‰ˆ</span>
        {% else %}
        {% if submission.status == 'SUCCESS' %}
        <button class="btn btn-xs btn-outline" hx-post="{% url 'set_final_selection' submission.id %}"
            hx-target="closest tr" hx-swap="outerHTML" hx-confirm="ç¢ºå®šè¦å°‡æ­¤æäº¤è¨­ç‚ºæœ€çµ‚ç‰ˆå—ï¼Ÿ">
            è¨­ç‚ºæœ€çµ‚ç‰ˆ
        </button>
        {% endif %}
        {% endif %}
    </td>
    <td>
        <a href="{{ submission.prediction_file.url }}" class="btn btn-xs btn-ghost" download>
            ğŸ“¥
        </a>
    </td>
</tr>