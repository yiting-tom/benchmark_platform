<!-- Single row for HTMX swap after setting final selection -->
<tr class="{% if submission.is_final_selection %}bg-primary/10{% endif %}">
    <td>{{ submission.id }}</td>
    <td>{{ submission.submitted_at|date:"Y-m-d H:i" }}</td>
    <td>
        {% if submission.status == 'PENDING' %}
        <span class="badge badge-ghost">Pending</span>
        {% elif submission.status == 'PROCESSING' %}
        <span class="badge badge-info">
            <span class="loading loading-spinner loading-xs mr-1"></span>
            Processing
        </span>
        {% elif submission.status == 'SUCCESS' %}
        <span class="badge badge-success">Success</span>
        {% else %}
        <span class="badge badge-error tooltip" data-tip="{{ submission.error_message }}">
            Failed
        </span>
        {% endif %}
    </td>
    <td>
        {% if submission.public_score is not None %}
        <span class="font-mono font-bold">{{ submission.public_score|floatformat:4 }}</span>
        {% else %}
        <span class="text-slate-400">-</span>
        {% endif %}
    </td>
    <td>
        {% if submission.is_final_selection %}
        <span class="badge badge-accent">
            <i data-lucide="check" class="w-3 h-3 mr-1"></i> Final
        </span>
        {% else %}
        {% if submission.status == 'SUCCESS' %}
        <button class="btn btn-xs btn-outline" hx-post="{% url 'set_final_selection' submission.id %}"
            hx-target="closest tr" hx-swap="outerHTML"
            hx-confirm="Are you sure you want to set this as the final selection?">
            Set as Final
        </button>
        {% endif %}
        {% endif %}
    </td>
    <td>
        <a href="{{ submission.prediction_file.url }}" class="btn btn-xs btn-ghost" download>
            <i data-lucide="download" class="w-4 h-4"></i>
        </a>
    </td>
</tr>